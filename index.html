<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dot Catcher</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✨</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder"></script>
    <style>
        @keyframes tituloAnimacao {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .titulo-interativo {
            animation: tituloAnimacao 2s infinite;
        }
        .bg-efeito {
            background: linear-gradient(45deg, #1e3a8a, #2563eb);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .chat-container {
            height: 300px;
            overflow-y: auto;
        }
        .transition-all {
            transition: all 0.3s ease;
        }
        .hover\:scale-105:hover {
            transform: scale(1.05);
        }
        body {
            user-select: none;
            overflow: hidden;
            cursor: none;
        }
        .chat-option {
            cursor: pointer;
            padding: 5px 10px;
            background-color: #4a5568;
            border-radius: 15px;
            margin: 5px;
            display: inline-block;
        }
        #game-area {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .sparkle, .bomb {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        .sparkle {
            background-color: #FFD700;
        }
        .bomb {
            background-color: #FF0000;
            animation: bombPulse 0.5s infinite alternate;
        }
        @keyframes bombPulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.2); }
        }
        #player {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #00FF00;
            border-radius: 50%;
            box-shadow: 0 0 10px #00FF00, 0 0 20px #00FF00, 0 0 30px #00FF00;
            pointer-events: none;
            z-index: 1002;
        }
        .trail {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(0, 255, 0, 0.5);
            pointer-events: none;
            transition: all 0.1s linear;
        }
        #score, #level {
            position: fixed;
            font-size: 24px;
            color: #FFFFFF;
            z-index: 1000;
        }
        #score {
            top: 10px;
            left: 10px;
        }
        #level {
            top: 10px;
            right: 10px;
        }
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }
        #menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 1001;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
            border: 2px solid #00FF00;
        }
        #menu h2 {
            font-size: 36px;
            color: #00FF00;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00FF00;
        }
        #menu button {
            margin: 10px;
            padding: 15px 30px;
            font-size: 24px;
            background-color: #00FF00;
            color: black;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #menu button:hover {
            background-color: #00CC00;
            transform: scale(1.1);
        }
        #placar {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 1001;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
            border: 2px solid #00FF00;
            display: none;
        }
        #placar h2 {
            font-size: 36px;
            color: #00FF00;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00FF00;
        }
        #placar ul {
            list-style-type: none;
            padding: 0;
        }
        #placar li {
            font-size: 24px;
            color: #FFFFFF;
            margin-bottom: 10px;
        }
        #lives {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: #FFFFFF;
            z-index: 1000;
        }
        .heart {
            display: inline-block;
            width: 30px;
            height: 30px;
            margin: 0 5px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FF0000"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>');
            background-size: cover;
        }
        @keyframes heartLoss {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(0); opacity: 0; }
        }
        .heart-loss {
            animation: heartLoss 0.5s forwards;
        }
    </style>
</head>
<body class="bg-efeito min-h-screen text-white">
    <canvas id="bg-canvas"></canvas>
    <div id="game-area"></div>
    <div id="player"></div>
    <div id="score">Pontuação: 0</div>
    <div id="level">Nível: 1</div>
    <div id="lives">
        <div class="heart"></div>
        <div class="heart"></div>
        <div class="heart"></div>
    </div>
    <div id="menu">
        <h2>Dot Catcher</h2>
        <button id="startButton">Iniciar</button>
        <button id="restartButton" style="display: none;">Reiniciar</button>
        <button id="placarButton">Placar</button>
    </div>
    <div id="placar">
        <h2>Melhores Pontuações</h2>
        <ul id="ranking"></ul>
        <button id="voltarButton">Voltar</button>
    </div>
    <div class="container mx-auto px-4 py-8 md:py-16">
        <!-- Resto do conteúdo permanece o mesmo -->
    </div>

    <script>
        // Scripts anteriores permanecem os mesmos

        // Novo script para o jogo
        const gameArea = document.getElementById('game-area');
        const player = document.getElementById('player');
        const scoreElement = document.getElementById('score');
        const levelElement = document.getElementById('level');
        const menu = document.getElementById('menu');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const placarButton = document.getElementById('placarButton');
        const placar = document.getElementById('placar');
        const ranking = document.getElementById('ranking');
        const voltarButton = document.getElementById('voltarButton');
        const livesElement = document.getElementById('lives');
        let score = 0;
        let level = 1;
        let gameRunning = false;
        let highScores = JSON.parse(localStorage.getItem('highScores')) || [];
        let lives = 3;

        // Efeitos sonoros
        const collectSound = new Audio('https://freesound.org/data/previews/270/270304_5123851-lq.mp3');
        const explosionSound = new Audio('https://freesound.org/data/previews/80/80921_1022651-lq.mp3');
        const levelUpSound = new Audio('https://freesound.org/data/previews/320/320655_5260872-lq.mp3');
        const gameOverSound = new Audio('https://freesound.org/data/previews/76/76376_877451-lq.mp3');

        // Novo soundtrack open source
        // Adicionando uma nova trilha sonora para o jogo
        // Trilha sonora de aventura em 8-bit para o jogo
        const gameSoundtrack = new Audio('https://commondatastorage.googleapis.com/codeskulptor-assets/Epoq-Lepidoptera.ogg');
        gameSoundtrack.loop = true;
        gameSoundtrack.volume = 0.5; // Ajuste o volume conforme necessário
        // Nota: Esta é uma trilha sonora de exemplo. Certifique-se de que a URL está funcionando e é apropriada para o jogo.
        gameSoundtrack.loop = true;

        function createGameObject(type) {
            const object = document.createElement('div');
            object.classList.add(type);
            object.style.left = `${Math.random() * 100}%`;
            object.style.top = `${Math.random() * 100}%`;
            gameArea.appendChild(object);
            return object;
        }

        function createSparkle() {
            return createGameObject('sparkle');
        }

        function createBomb() {
            const bomb = createGameObject('bomb');
            bomb.vx = 0;
            bomb.vy = 0;
            return bomb;
        }

        function updateScore() {
            scoreElement.textContent = `Pontuação: ${score}`;
            const newLevel = Math.floor(score / 10) + 1;
            if (newLevel > level) {
                level = newLevel;
                levelUpSound.play();
            }
            levelElement.textContent = `Nível: ${level}`;
        }

        function resetGame() {
            score = 0;
            level = 1;
            lives = 3;
            updateScore();
            updateLives();
            gameArea.innerHTML = '';
            for (let i = 0; i < 10; i++) {
                createSparkle();
            }
            for (let i = 0; i < 5; i++) {
                createBomb();
            }
            gameSoundtrack.currentTime = 0;
            gameSoundtrack.play();
        }

        function updateLives() {
            livesElement.innerHTML = '';
            for (let i = 0; i < lives; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                livesElement.appendChild(heart);
            }
        }

        function loseLife() {
            if (lives > 0) {
                lives--;
                const hearts = livesElement.querySelectorAll('.heart');
                hearts[lives].classList.add('heart-loss');
                if (lives === 0) {
                    gameOver();
                }
            }
        }

        function gameOver() {
            gameRunning = false;
            menu.style.display = 'block';
            startButton.style.display = 'none';
            restartButton.style.display = 'inline-block';
            updateHighScores();
            gameSoundtrack.pause();
            gameOverSound.play();
        }

        function createParticles(x, y, color, count) {
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'absolute';
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                particle.style.width = '5px';
                particle.style.height = '5px';
                particle.style.backgroundColor = color;
                particle.style.borderRadius = '50%';
                gameArea.appendChild(particle);

                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 5 + 2;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;

                let opacity = 1;
                function animateParticle() {
                    if (opacity <= 0) {
                        gameArea.removeChild(particle);
                        return;
                    }
                    opacity -= 0.02;
                    particle.style.opacity = opacity;
                    particle.style.left = `${parseFloat(particle.style.left) + vx}px`;
                    particle.style.top = `${parseFloat(particle.style.top) + vy}px`;
                    requestAnimationFrame(animateParticle);
                }
                animateParticle();
            }
        }

        let lastUpdateTime = 0;
        const updateInterval = 1000 / 60; // 60 FPS

        function updateBombPositions(currentTime) {
            if (!gameRunning) return;

            if (currentTime - lastUpdateTime < updateInterval) {
                requestAnimationFrame(updateBombPositions);
                return;
            }

            lastUpdateTime = currentTime;

            const bombs = document.querySelectorAll('.bomb');
            const mouseX = parseFloat(player.style.left) + 15;
            const mouseY = parseFloat(player.style.top) + 15;

            bombs.forEach(bomb => {
                const rect = bomb.getBoundingClientRect();
                const dx = mouseX - rect.left;
                const dy = mouseY - rect.top;
                const distance = Math.hypot(dx, dy);

                // Aumenta significativamente a aceleração e velocidade máxima
                const baseAcceleration = 1.2; // Dobrado
                const accelerationIncrease = 0.6; // Dobrado
                const acceleration = baseAcceleration + (level * accelerationIncrease);
                bomb.vx += (dx / distance) * acceleration;
                bomb.vy += (dy / distance) * acceleration;

                // Aumenta a velocidade máxima
                const baseMaxSpeed = 20; // Dobrado
                const maxSpeedIncrease = 2; // Dobrado
                const maxSpeed = baseMaxSpeed + (level * maxSpeedIncrease);
                const speed = Math.hypot(bomb.vx, bomb.vy);
                if (speed > maxSpeed) {
                    bomb.vx = (bomb.vx / speed) * maxSpeed;
                    bomb.vy = (bomb.vy / speed) * maxSpeed;
                }

                // Adiciona um movimento aleatório mais pronunciado
                bomb.vx += (Math.random() - 0.5) * 1.5;
                bomb.vy += (Math.random() - 0.5) * 1.5;

                // Atualiza a posição da bomba
                const newX = rect.left + bomb.vx;
                const newY = rect.top + bomb.vy;

                // Verifica colisão com as bordas (agora com mais elasticidade)
                if (newX < 0 || newX > window.innerWidth - 20) bomb.vx *= -1;
                if (newY < 0 || newY > window.innerHeight - 20) bomb.vy *= -1;

                bomb.style.left = `${newX}px`;
                bomb.style.top = `${newY}px`;

                if (distance < 30) {
                    explosionSound.currentTime = 0;
                    explosionSound.play();
                    createParticles(rect.left, rect.top, '#FF0000', 30);
                    loseLife();
                    bomb.remove();
                    createBomb();
                }
            });

            requestAnimationFrame(updateBombPositions);
        }

        let trail = [];
        const trailLength = 10;

        document.addEventListener('mousemove', (e) => {
            const mouseX = e.clientX;
            const mouseY = e.clientY;

            player.style.left = `${mouseX - 15}px`;
            player.style.top = `${mouseY - 15}px`;

            // Adiciona novo elemento à trilha
            if (trail.length >= trailLength) {
                const oldTrail = trail.shift();
                gameArea.removeChild(oldTrail);
            }

            const trailElement = document.createElement('div');
            trailElement.classList.add('trail');
            trailElement.style.left = `${mouseX}px`;
            trailElement.style.top = `${mouseY}px`;
            gameArea.appendChild(trailElement);
            trail.push(trailElement);

            // Atualiza opacidade da trilha
            trail.forEach((element, index) => {
                element.style.opacity = (index + 1) / trailLength;
            });

            if (!gameRunning) return;

            const sparkles = document.querySelectorAll('.sparkle');

            sparkles.forEach(sparkle => {
                const rect = sparkle.getBoundingClientRect();
                const distance = Math.hypot(mouseX - rect.left, mouseY - rect.top);

                if (distance < 30) {
                    collectSound.play();
                    sparkle.remove();
                    score++;
                    updateScore();
                    createSparkle();
                    createParticles(rect.left, rect.top, '#FFD700', 15);
                }
            });

            // Gera novos inimigos conforme avança de level
            const bombCount = 5 + (level * 3); // Aumenta o número de bombas em 3x por nível
            while (document.querySelectorAll('.bomb').length < bombCount) {
                createBomb();
            }

            // Mantém um número fixo de sparkles
            const sparkleCount = 10;
            while (document.querySelectorAll('.sparkle').length < sparkleCount) {
                createSparkle();
            }
        });

        startButton.addEventListener('click', () => {
            gameRunning = true;
            menu.style.display = 'none';
            resetGame();
            requestAnimationFrame(updateBombPositions);
            gameSoundtrack.play();
        });

        restartButton.addEventListener('click', () => {
            gameRunning = true;
            menu.style.display = 'none';
            resetGame();
            requestAnimationFrame(updateBombPositions);
            gameSoundtrack.play();
        });

        placarButton.addEventListener('click', () => {
            menu.style.display = 'none';
            placar.style.display = 'block';
            updateRanking();
        });

        voltarButton.addEventListener('click', () => {
            placar.style.display = 'none';
            menu.style.display = 'block';
        });

        function updateHighScores() {
            highScores.push(score);
            highScores.sort((a, b) => b - a);
            highScores = highScores.slice(0, 10);
            localStorage.setItem('highScores', JSON.stringify(highScores));
        }

        function updateRanking() {
            ranking.innerHTML = '';
            highScores.forEach((score, index) => {
                const li = document.createElement('li');
                li.textContent = `${index + 1}. ${score}`;
                ranking.appendChild(li);
            });
        }

        // Background animado otimizado
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];

        function createParticle(x, y) {
            return {
                x: x,
                y: y,
                size: Math.random() * 3 + 1,
                speedX: Math.random() * 2 - 1,
                speedY: Math.random() * 2 - 1
            };
        }

        function drawParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            particles.forEach(particle => {
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                ctx.fill();

                particle.x += particle.speedX;
                particle.y += particle.speedY;

                if (particle.x < 0 || particle.x > canvas.width) particle.speedX *= -1;
                if (particle.y < 0 || particle.y > canvas.height) particle.speedY *= -1;
            });
            requestAnimationFrame(drawParticles);
        }

        for (let i = 0; i < 50; i++) {
            particles.push(createParticle(Math.random() * canvas.width, Math.random() * canvas.height));
        }

        let lastMouseMoveTime = 0;
        canvas.addEventListener('mousemove', (e) => {
            const currentTime = Date.now();
            if (currentTime - lastMouseMoveTime > 50) {
                for (let i = 0; i < 2; i++) {
                    particles.push(createParticle(e.clientX, e.clientY));
                }
                if (particles.length > 200) particles = particles.slice(-200);
                lastMouseMoveTime = currentTime;
            }
        });

        drawParticles();

        // Adicione este evento para garantir que o áudio possa ser reproduzido
        document.addEventListener('click', () => {
            gameSoundtrack.play().catch(error => console.log("Erro ao reproduzir áudio:", error));
        }, { once: true });
    </script>
</body>
</html>
